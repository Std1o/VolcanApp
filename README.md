# Android клиент для генерации и загрузки изображений на сервер

- В поля ввода записываются ширина и длина изображения
- Кнопка "Generate" генерирует превью (уменьшенная копия изображения с сохранением пропорций) и основное изображение в виде Flow массива байтов
- Кнопка "Upload" загружает поток массива байтов на сервер
- Под превью пишется результат загрузки

## Архитектура:

- Многомодульная
- Соответствует Clean Architecture
- На presentation слое используется архитектурный паттерн MVVM

## Стек:

Язык: Kotlin  
DI: Koin  
Ассинхронность: Coroutines, Flow  
Сеть: Ktor  
UI: Jetpack Compose  
Отображение картинок: Coil

## Для проверки:

- Поменять URL можно в buildConfigField модуля data

## Структура проекта

### Модули и ключевые файлы
- **build-logic** - convention plugin
  - `library-convention.gradle` создан для примера. Используется для подключения повторяющихся в некскольких модулях библиотек одной строкой (подключение плагина). По сути убирает boilerplate из build.gradle
- **app** - точка входа
  - `App` инициализирует koin связывая di модули 
- **domain** - бизнес-логика
  - `ImageRepository` интерфейс репозитория, нужен для того чтобы domain не зависел от data. Domain предоставляет интерфейс, а data делает реализацию
  - `CloseStreamUseCase` и `UploadImageUseCase` не содержат бизнес-логики, созданы для примера поддержания clean arch
  - `GeneratePngUseCase` генерирует массивы байтов для PNG *[сгенерирован нейросетью]*
- **data** - работа с данными
  - `ImageRemoteDataSource` загружает массивы байтов на сервер потоково по мере поступления из flow
- **presentation** - UI слой
  - `ImageUiState` содержит актуальное состояние UI
  - `MainScreen` рисует UI с помощью Jetpack Compose
  - `ImageViewModel` содержит UI логику, хранит состояние UI, связывает UI с domain
